<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y3DLVKMZF6"></script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="5602ec2b-35ca-418d-8899-53ed35d6853f"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'G-Y3DLVKMZF6');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Enigma Capital — AI-Driven Quant Strategies</title>
  <meta name="description" content="AI-driven quant models with live performance insights. Explore strategies, quarterly returns, and our model stack." />
  <link rel="canonical" href="https://enigma-capital.github.io/" />

  <!-- Social (Open Graph / Twitter) -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Enigma Capital — AI-Driven Quant Strategies" />
  <meta property="og:description" content="Built to win" />
  <meta property="og:url" content="https://enigma-capital.github.io/" />
  <meta property="og:image" content="https://enigma-capital.github.io/capybg2-up.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Enigma Capital — AI-Driven Quant Strategies" />
  <meta name="twitter:description" content="Built to win" />
  <meta name="twitter:image" content="https://enigma-capital.github.io/capybg2-up.png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap">

  <style>
    
    :root{
    --bg:#02050b; /* Very dark blue-black background */
    --panel:rgba(4, 10, 20, .6);
    --glass:rgba(6, 15, 30, .7);
    --text:#c9d9f5; /* A subtle, cool off-white */
    --muted:#7d94b3;
    --accent:#3e92ff; /* A bright, deep blue */
    --accent-2:#00fff7; /* An electric cyan for a vibrant blend */
    --border:rgba(62, 146, 255, .25);
    --success:#5dff9e; /* A contrasting green for success */
    --danger:#ff5c8a; /* A vibrant pink for danger */
    --shadow:0 10px 30px rgba(0,0,0,.6);
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      background: radial-gradient(1200px 800px at 20% -10%, rgba(0,255,247,.08), transparent 60%),
                  radial-gradient(900px 700px at 110% 10%, rgba(124,92,255,.08), transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
      overflow-x:hidden;
    }

    /* Background Canvas */
    canvas#shader{
      position:fixed;inset:0;z-index:-2;display:block;
      filter:contrast(1.1) brightness(1.05) saturate(1.05);
    }
    .bg-fade{
      position:fixed;inset:0;z-index:-1;
      background: radial-gradient(800px 500px at 70% 10%, rgba(0,255,247,.10), transparent 60%),
                  radial-gradient(700px 500px at 20% 80%, rgba(124,92,255,.08), transparent 55%);
      mix-blend-mode:screen;pointer-events:none;
    }

    /* Header */
    .header{
      position:fixed;left:0;right:0;top:0;z-index:50;
      backdrop-filter: blur(18px);
      background: linear-gradient(180deg, rgba(10,11,12,.75), rgba(10,11,12,.35));
      border-bottom:1px solid var(--border);
      transition:background .3s ease, transform .3s ease;
    }
    .header.scrolled{ background: rgba(10,11,12,.92); }
    .nav{
      max-width:1200px;margin:0 auto;padding:14px 20px;
      display:flex;align-items:center;justify-content:space-between;gap:16px;
    }
    .brand{
      display:flex;align-items:center;gap:.65rem;text-decoration:none;
    }
    .brand .logo-dot{
      width:12px;height:12px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--accent));
      box-shadow:0 0 12px var(--accent), 0 0 28px rgba(0,255,247,.5);
    }
    .brand .name{
      font-weight:800;letter-spacing:.6px;font-size:1.15rem;color:var(--text);
      text-shadow:0 0 14px rgba(0,255,247,.12);
    }
    .navlinks{display:flex;gap:18px;align-items:center;list-style:none}
    .navlinks a{
      color:var(--text);text-decoration:none;font-weight:600;font-size:.95rem;
      opacity:.9;padding:.5rem .75rem;border-radius:12px;
      transition:.25s ease;
    }
    .navlinks a:hover{ color:var(--accent); background:rgba(0,255,247,.08); }

    .menu-btn{display:none}
    @media (max-width:860px){
      .menu-btn{display:block;background:transparent;border:0;cursor:pointer}
      .menu-btn span{display:block;width:26px;height:2px;background:#cfe9ff;margin:6px 0}
      .navlinks{
        position:fixed;inset:64px 12px auto 12px;flex-direction:column;
        background:var(--glass);backdrop-filter:blur(18px);
        border:1px solid var(--border);border-radius:16px;padding:16px;
        transform:translateY(-20px);opacity:0;pointer-events:none;transition:.25s ease;
      }
      .navlinks.open{transform:translateY(0);opacity:1;pointer-events:auto}
    }

    /* Hero */
    .hero{
      min-height:100svh;display:grid;place-items:center;padding:120px 20px 40px;position:relative;
    }
    .hero-inner{max-width:1100px;margin:0 auto;text-align:center}
    .glow-title{
      font-weight:800;font-size:clamp(2.2rem,8vw,5rem);letter-spacing:.02em;line-height:1.05;
      background: conic-gradient(from 210deg, #e6f1ff 0%, #9edcff 20%, var(--accent) 40%, #b7a6ff 60%, #e6f1ff 100%);
      -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
      text-shadow:0 0 18px rgba(0,255,247,.25), 0 0 36px rgba(124,92,255,.15);
      filter: drop-shadow(0 18px 40px rgba(0,0,0,.4));
    }
    .rotator{
      margin:16px auto 26px;color:#d7e6ff;font-weight:600;opacity:.95;
      font-size:clamp(1rem,2.4vw,1.25rem);
      min-height:1.6em; display:flex;gap:.5ch;align-items:center;justify-content:center;
    }
    .rotator .cursor{width:2px;height:1.1em;background:var(--accent);animation:blink 1s step-end infinite}
    @keyframes blink{50%{opacity:.1}}
    .hero-cta{
      display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-top:18px
    }
    .btn{
      border:1px solid var(--border);border-radius:14px;padding:.9rem 1.2rem;
      font-weight:700;letter-spacing:.02em;text-decoration:none;transition:.25s ease;
      box-shadow:var(--shadow); position:relative; overflow:hidden;
    }
    .btn-primary{
      color:#0a0b0c;background:linear-gradient(90deg, var(--accent), #7efcff);
      text-shadow:none; box-shadow:0 8px 28px rgba(0,255,247,.25), 0 0 0 1px rgba(0,255,247,.2) inset;
    }
    .btn-primary:hover{ transform:translateY(-2px); }
    .btn-ghost{color:var(--text);background:rgba(0,255,247,.06)}
    .btn-ghost:hover{ background:rgba(0,255,247,.12); color:var(--accent); }

    .scroll-indicator{
      position:absolute;left:50%;bottom:18px;transform:translateX(-50%);
      font-family:"JetBrains Mono",monospace;font-size:.8rem;color:var(--muted);
      display:flex;align-items:center;gap:8px;opacity:.8
    }
    .scroll-indicator .dot{
      width:6px;height:6px;border-radius:50%;background:var(--accent);
      box-shadow:0 0 12px var(--accent); animation:float 1.4s ease-in-out infinite;
    }
    @keyframes float{0%,100%{transform:translateY(-2px)}50%{transform:translateY(3px)}}

    /* Metrics */
    .metrics{
      max-width:1100px;margin:30px auto 0;padding:0 20px;
      display:grid;grid-template-columns:repeat(3,1fr);gap:16px
    }
    @media (max-width:860px){ .metrics{grid-template-columns:1fr} }
    .metric{
      background:var(--panel);border:1px solid var(--border);border-radius:18px;
      padding:18px 18px 16px;backdrop-filter: blur(12px); position:relative; overflow:hidden;
    }
    .metric:before{
      content:"";position:absolute;inset:-1px -1px auto -1px;height:2px;
      background:linear-gradient(90deg, transparent, var(--accent), transparent);opacity:.45
    }
    .metric h4{font-size:.95rem;color:#cfe9ff;margin-bottom:4px;font-weight:700;letter-spacing:.02em}
    .metric .value{
      font-family:"JetBrains Mono",monospace;font-size:1.6rem;font-weight:700;
      display:flex;align-items:baseline;gap:8px
    }
    .trend{
      font-size:.85rem;border-radius:999px;padding:.15rem .5rem;margin-left:auto;
      border:1px solid rgba(255,255,255,.1)
    }
    .trend.up{ color:var(--success); border-color:rgba(62,233,138,.35) }
    .trend.down{ color:var(--danger); border-color:rgba(255,92,138,.35) }

    /* ===== Quarterly Performance ===== */
    .section#timeline {
    padding: 80px 20px;
    }

    .section {
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 16px; /* optional side padding to match timeline */
    }

    

    .section#timeline .title {
    max-width: 1100px;
    margin: 0 auto 18px;
    font-weight: 800;
    font-size: 1.6rem;
    letter-spacing: .02em;
    }

    .timeline {
    max-width: 1100px;
    margin: 0 auto 40px; /* center + give 40px bottom margin */
    padding: 16px;
    border-radius: 18px;
    background: var(--panel);
    border: 1px solid var(--border);
    backdrop-filter: blur(10px);
    }

    .nodes {
    display: flex;
    gap: 22px;
    padding: 14px 20px;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 18px;
    backdrop-filter: blur(10px);
    width: max-content;       /* auto-shrink to fit nodes */
    max-width: 100%;          /* but never overflow container */
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    }

    .node {
    min-width: 180px;
    scroll-snap-align: center;
    border: 1px solid rgba(0,255,247,.25);
    border-radius: 16px;
    padding: 14px 14px 12px;
    background: linear-gradient(180deg, rgba(0,255,247,.07), rgba(124,92,255,.045));
    transition: .2s ease;
    cursor: pointer;
    flex: 0 0 auto;           /* don’t stretch */
    }

    .node:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 28px rgba(0,0,0,.35);
    }

    .node .q {
    font-weight: 800;
    color: #e8f4ff;
    }

    .node .y {
    font-size: .85rem;
    color: var(--muted);
    }

    .node .badge {
    margin-top: 8px;
    font-family: "JetBrains Mono", monospace;
    font-size: .8rem;
    color: #cfe9ff;
    opacity: .9;
    }

    .node a {
    text-decoration: none;
    color: inherit;
    display: block;
    }


    /* Features */
    .features{
      max-width:1100px;margin:0 auto;display:grid;gap:18px;
      grid-template-columns:repeat(3,1fr)
    }
    @media (max-width:980px){ .features{grid-template-columns:1fr 1fr} }
    @media (max-width:680px){ .features{grid-template-columns:1fr} }
    .feature{
      background:var(--glass);border:1px solid var(--border);border-radius:18px;
      padding:18px; perspective:800px; transform-style:preserve-3d; transition:transform .2s ease;
    }
    .feature .card{
      transform:translateZ(24px); will-change:transform;
    }
    .feature h3{font-size:1.15rem;margin-bottom:6px}
    .feature p{color:#cfe1ff;opacity:.85;line-height:1.55}
    .feature .icon{
      width:42px;height:42px;border-radius:12px;margin-bottom:8px;
      display:grid;place-items:center;font-size:22px;
      background:linear-gradient(135deg, rgba(0,255,247,.18), rgba(124,92,255,.18));
      border:1px solid rgba(255,255,255,.1)
    }

    .title{
        margin-bottom: 1rem;
    }

    /* Footer */
    .footer{
      padding:28px 20px 60px;margin-top:40px;text-align:center;color:#c7d6ea
    }
    .social{
      margin-top:12px;display:inline-flex;align-items:center;gap:10px;
      text-decoration:none;color:var(--accent);border:1px solid var(--border);
      padding:.7rem 1rem;border-radius:12px;background:rgba(0,255,247,.06);
      transition:.25s ease
    }
    .social:hover{ background:rgba(0,255,247,.12); transform:translateY(-2px) }

 



.metrics {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1.2rem;
  margin-top: 2rem;
}

.metric-box {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 1rem;
  padding: 1.2rem;
  text-align: center;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.metric-box:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
}

.metric-box h4 {
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 0.6rem;
  color: #aaa;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.metric-box .value {
  font-size: 1.4rem;
  font-weight: 700;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.4rem;
}

.count {
  font-family: 'JetBrains Mono', monospace;
  color: #fff;
}

.trend.up {
  color: #3fb950; /* green */
}

.trend.down {
  color: #f85149; /* red */
}

/* Loading animation (instead of NaN or --) */
.loading::after {
  content: '';
  display: inline-block;
  width: 0.8em;
  height: 0.8em;
  border: 2px solid #888;
  border-top: 2px solid #fff;
  border-radius: 50%;
  margin-left: 0.5em;
  animation: spin 0.9s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}



    /* Accessibility: respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{animation:none !important;transition:none !important}
    }
  </style>
</head>
<body>
  <!-- WebGL background -->
  <canvas id="shader" aria-hidden="true"></canvas>
  <div class="bg-fade" aria-hidden="true"></div>

  <!-- Header -->
  <header class="header" id="header">
    <nav class="nav" aria-label="Primary">
      <a class="brand" href="/">
        <span class="logo-dot" aria-hidden="true"></span>
        <span class="name">ENIGMA<span style="color:var(--accent)">CAPITAL</span></span>
      </a>
      <button class="menu-btn" id="menuBtn" aria-label="Open menu" aria-expanded="false"><span></span><span></span><span></span></button>
      <ul class="navlinks" id="navlinks">
        <li><a href="models.html">Models</a></li>
        <li><a href="#timeline">Performance</a></li>
        <li><a href="businessplan.html">Business Plan</a></li>
        <li><a href="Q32025.html">Q3 2025</a></li>
      </ul>
    </nav>
  </header>

  <!-- HERO -->
  <main class="hero" id="hero">
    <div class="hero-inner">
      <h1 class="glow-title">BUILT TO<span style="background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent"> WIN.</span></h1>
      <div class="rotator" aria-live="polite">
        <span id="rotatingText"></span><span class="cursor" aria-hidden="true"></span>
      </div>
      <div class="hero-cta">
        <a class="btn btn-primary" href="models.html">🚀 Explore Our Models</a>
        <a class="btn btn-ghost" href="#timeline">View Performance</a>
      </div>

    <!-- Metrics -->
    <div class="metrics">
    <!-- <div class="metric-box">
        <h4>YTD Return</h4>
        <div class="value">
        <span id="ytd-return" class="count loading">--</span>
        <span id="ytd-trend" class="trend">--</span>
        </div>
    </div> -->
    <div class="metric-box">
        <h4>Win Rate</h4>
        <div class="value">
        <span id="win-rate" class="count loading">--</span>
        </div>
    </div>
    <div class="metric-box">
        <h4>Sharpe Ratio</h4>
        <div class="value">
        <span id="sharpe-ratio" class="count loading">--</span>
        </div>
    </div>
    </div>


 
   
<script>
    const URL = "https://greek-thinks-crazy-officer.trycloudflare.com/get_metrics";
    const winEl = document.getElementById("win-rate");
    const sharpeEl = document.getElementById("sharpe-ratio");

    // This function sets the element's text content only if the value is a valid number.
    function setIfValid(el, raw, formatFn) {
        if (!el) return;
        const num = parseFloat(raw);
        if (!isNaN(num) && raw !== null && raw !== undefined) {
            el.textContent = formatFn(num);
            el.classList.remove("loading");
        } else {
            el.textContent = "--";
        }
    }

    // This is the main function to fetch and update all metrics.
    async function fetchAndUpdateMetrics() {
        try {
            
            // Immediately start a loading state on all metrics
            if (winEl) {
                winEl.classList.add("loading");
            }
            if (sharpeEl) {
                sharpeEl.classList.add("loading");
            }
            

            const res = await fetch(URL, {
                headers: {
                    'Accept': 'application/json',
                    'ngrok-skip-browser-warning': 'true'
                }
            });

            // Check if the response is valid JSON
            if (res.ok) {
                const data = await res.json();
                console.log("Metrics fetched successfully:", data);

                // Update the Win Rate
                setIfValid(winEl, data.win_rate, n => n.toFixed(2) + "%");

                // Update the Sharpe Ratio
                setIfValid(sharpeEl, data.sharpe_ratio, n => n.toFixed(2));
            } else {
                console.error("Server responded with a non-OK status:", res.status);
                throw new Error("Invalid response from server");
                
            }

        } catch (err) {
            console.error("Error fetching or processing metrics:", err);
            // On error, display the placeholder for both metrics.
            if (winEl) {
                winEl.textContent = "--";
                winEl.classList.remove("loading");
            }
            if (sharpeEl) {
                sharpeEl.textContent = "--";
                sharpeEl.classList.remove("loading");
            }
        }
    }

    // Immediately fetch and update on page load.
    fetchAndUpdateMetrics();

    // Set up a timer to continuously fetch and update the metrics every 30 seconds.
    setInterval(fetchAndUpdateMetrics, 10000);
</script>








    <div class="scroll-indicator" aria-hidden="true">
      <span class="dot"></span><span>Scroll</span>
    </div>
  </main>

  <!-- PERFORMANCE TIMELINE -->
<section class="section" id="timeline">
  <h2 class="title">Quarterly Performance</h2>
  <div class="timeline">
    <div class="nodes">
      <!-- Add nodes manually, panel auto-adjusts -->
      <div class="node">
        <a href="Q32025.html" aria-label="Open Q3 2025 performance">
          <div class="q">Q3</div>
          <div class="y">2025</div>
          <div class="badge">Live</div>
        </a>
      </div>
      <!-- Just copy-paste more .node divs when needed -->
      
      <div class="node">
        <div class="q">Q4</div>
        <div class="y">2025</div>
        <div class="badge">Coming soon</div>
      </div>
      
      <div class="node">
        <div class="q">Q1</div>
        <div class="y">2026</div>
        <div class="badge">Coming soon</div>
      </div>

      <div class="node">
        <div class="q">Q2</div>
        <div class="y">2026</div>
        <div class="badge">Coming soon</div>
      </div>

      <div class="node">
        <div class="q">Q3</div>
        <div class="y">2026</div>
        <div class="badge">Coming soon</div>
      </div>
      
    </div>
  </div>
</section>


  <!-- FEATURES -->
  <!-- <section class="section" id="features">
    <h2 class="title">What Powers Our Edge</h2>
    <div class="features">
      <div class="feature tilt">
        <div class="card">
          <div class="icon">📊</div>
          <h3>Quant Models</h3>
          <p>Robust, regime-aware strategies across multiple timeframes, with strict risk controls and adaptive position sizing.</p>
        </div>
      </div>
      <div class="feature tilt">
        <div class="card">
          <div class="icon">⚡</div>
          <h3>Execution</h3>
          <p>Low-latency order routing and slippage-aware entries to preserve edge where it matters most: fills.</p>
        </div>
      </div>
      <div class="feature tilt">
        <div class="card">
          <div class="icon">🧠</div>
          <h3>AI + Data</h3>
          <p>Signal pipelines backed by ML and proven statistics—no overfit magic, only measurable lift.</p>
        </div>
      </div>
    </div>
  </section> -->

  <!-- FOOTER -->
  <footer class="footer">
    <div>&copy; 2025 Enigma Capital. Building the future of quantitative trading.</div>
    <a class="social" href="https://x.com/enigmacaptech" target="_blank" rel="noopener">Follow on X (@enigmacaptech)</a>
  </footer>

  <script>
    // ====== Mobile Nav ======
    const menuBtn = document.getElementById('menuBtn');
    const navlinks = document.getElementById('navlinks');
    if(menuBtn){
      menuBtn.addEventListener('click', () => {
        const open = navlinks.classList.toggle('open');
        menuBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
      });
      // Close on link click (mobile)
      navlinks.querySelectorAll('a').forEach(a => a.addEventListener('click', () => {
        navlinks.classList.remove('open'); menuBtn.setAttribute('aria-expanded','false');
      }));
    }

    // ====== Header scroll effect ======
    const header = document.getElementById('header');
    const onScroll = () => header.classList.toggle('scrolled', window.scrollY > 12);
    onScroll(); window.addEventListener('scroll', onScroll, {passive:true});

    // ====== Rotating Taglines (type/erase minimal) ======
    const lines = [
      "Alpha Engineered.",
      "Discipline. Data. Dominance.",
      "Research. Risk. Execution.",
      "Beating the Market with Code",
      "Where code meets capital."
    ];
    const rotator = document.getElementById('rotatingText');
    let idx = 0, typing = true, ch = 0, hold = 900, speed = 42;
    function loop(){
      const text = lines[idx];
      if(typing){
        rotator.textContent = text.slice(0, ++ch);
        if(ch === text.length){ typing = false; setTimeout(loop, hold); return; }
      }else{
        rotator.textContent = text.slice(0, --ch);
        if(ch === 0){ typing = true; idx = (idx+1) % lines.length; }
      }
      setTimeout(loop, typing ? speed : Math.max(24, speed - 10));
    }
    setTimeout(loop, 600);

    // ====== Count Up Metrics (IntersectionObserver) ======
    const counters = document.querySelectorAll('.count');
    const easeOut = t => 1 - Math.pow(1 - t, 3);
    function animateCount(el){
      const target = parseFloat(el.dataset.target);
      const suffix = el.dataset.suffix || "";
      const dur = 1200 + Math.random()*600;
      let st; function tick(ts){
        if(!st) st = ts; const p = Math.min(1, (ts - st)/dur); const v = easeOut(p) * target;
        el.textContent = (target % 1 ? v.toFixed(2) : Math.round(v)) + suffix;
        if(p < 1) requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    }
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){ animateCount(e.target); io.unobserve(e.target); }
      });
    }, {threshold:.6});
    counters.forEach(c=>io.observe(c));

    // ====== Feature Tilt ======
    document.querySelectorAll('.tilt').forEach(card=>{
      let rID;
      function handle(e){
        const rect = card.getBoundingClientRect(), cx = rect.left + rect.width/2, cy = rect.top + rect.height/2;
        const dx = (e.clientX - cx) / (rect.width/2), dy = (e.clientY - cy) / (rect.height/2);
        card.style.transform = `rotateX(${(-dy*6).toFixed(2)}deg) rotateY(${(dx*8).toFixed(2)}deg)`;
      }
      card.addEventListener('mousemove', (e)=>{ cancelAnimationFrame(rID); rID = requestAnimationFrame(()=>handle(e)); });
      card.addEventListener('mouseleave', ()=>{ card.style.transform = 'rotateX(0) rotateY(0)'; });
    });

    // ====== Smooth scroll for in-page anchors ======
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href'); if(id.length<2) return;
        const target = document.querySelector(id);
        if(target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    });

    // ====== WebGL Shader (kept lightweight, with safety checks) ======
    (function(){
      const canvas = document.getElementById('shader');
      const gl = canvas && canvas.getContext('webgl', {antialias:false, preserveDrawingBuffer:false});
      if(!gl){ console.warn('WebGL not supported'); return; }

      const vSrc = `
        attribute vec4 a_position;
        void main(){ gl_Position = a_position; }
      `;
    const fSrc = `
  precision highp float;
  uniform vec2 u_resolution;
  uniform float u_time;

  float hash(vec2 p){ return fract(sin(dot(p, vec2(127.1,311.7))) * 43758.5453123); }

  float noise(vec2 p){
    vec2 i=floor(p), f=fract(p);
    float a=hash(i), b=hash(i+vec2(1.,0.)), c=hash(i+vec2(0.,1.)), d=hash(i+vec2(1.,1.));
    vec2 u=f*f*(3.-2.*f);
    return mix(a,b,u.x)+ (c-a)*u.y*(1.-u.x) + (d-b)*u.x*u.y;
  }

  void main(){
    vec2 st = gl_FragCoord.xy / u_resolution.xy;
    st.x *= u_resolution.x / u_resolution.y;

    float t = u_time * 0.1;
    float n = noise(st*2.0 + vec2(t, -t))*0.5 + noise(st*7.0 - t)*0.3;

    // float grid = smoothstep(.49,.5, abs(fract(st.x*10.)-.5)) * 0.06 +
    //              smoothstep(.49,.5, abs(fract(st.y*10.)-.5)) * 0.06;

    float vignette = smoothstep(1.2,.3, distance(st, vec2(.5)));

    // Create a predominantly black color with a grey-blue hue
    vec3 base_color = vec3(n * 0.25); // Lower intensity for darker noise
    vec3 blue_tint = vec3(0.05, 0.1, 0.2); // A dark, subtle blue tint
    vec3 final_color = base_color + blue_tint;

    final_color *= vignette;
    final_color += vec3(grid * 0.8); // Apply grid on top

    gl_FragColor = vec4(final_color, 1.0);
  }
`;

      function compile(type, src){
        const s = gl.createShader(type);
        gl.shaderSource(s, src); gl.compileShader(s);
        return s;
      }
      const vs = compile(gl.VERTEX_SHADER, vSrc);
      const fs = compile(gl.FRAGMENT_SHADER, fSrc);
      const prog = gl.createProgram();
      gl.attachShader(prog, vs); gl.attachShader(prog, fs); gl.linkProgram(prog);
      gl.useProgram(prog);

      const posLoc = gl.getAttribLocation(prog, 'a_position');
      const resLoc = gl.getUniformLocation(prog, 'u_resolution');
      const timeLoc = gl.getUniformLocation(prog, 'u_time');

      const buf = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, buf);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1, 1,-1, -1,1, 1,1]), gl.STATIC_DRAW);
      gl.enableVertexAttribArray(posLoc);
      gl.vertexAttribPointer(posLoc, 2, gl.FLOAT, false, 0, 0);

      function resize(){
        const dpr = Math.min(window.devicePixelRatio || 1, 1.6);
        const w = Math.floor(innerWidth * dpr), h = Math.floor(innerHeight * dpr);
        if(canvas.width !== w || canvas.height !== h){
          canvas.width = w; canvas.height = h; gl.viewport(0, 0, w, h);
        }
      }
      resize(); addEventListener('resize', resize, {passive:true});

      const start = performance.now();
      function frame(now){
        resize();
        gl.clearColor(0,0,0,1); gl.clear(gl.COLOR_BUFFER_BIT);
        gl.uniform2f(resLoc, canvas.width, canvas.height);
        gl.uniform1f(timeLoc, (now - start) * 0.001);
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        requestAnimationFrame(frame);
      }
      requestAnimationFrame(frame);
    })();
  </script>
</body>
</html>
